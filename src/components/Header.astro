---
import { SITE } from '../data/site'
import { LINKS } from '../data/site'

const wa = LINKS.wa()
const tel = LINKS.call()
---

<a
  href="#contenido"
  class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-white text-slate-900 px-3 py-2 rounded-md shadow"
>
  Saltar al contenido
</a>

<!-- BANNER SUPERIOR (seguro) -->
<div
  class="w-full bg-[#F6F8FB] text-[#2A3E63] text-center text-sm py-1.5 px-4 border-b border-gray-200 font-medium"
>
  Este sitio está destinado exclusivamente a la gestión y contratación de planes UCM con la
  ejecutiva {SITE.name}. No corresponde a servicios de emergencia ni atención médica inmediata.
</div>

<header class="sticky top-0 z-50 bg-white/90 border-b border-slate-200 backdrop-blur-md">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between md:justify-start">
    <a href="/" aria-label="Inicio - Planes UCM" class="flex-shrink-0">
      <img
        src="/logos/logo-ejecutiva.png"
        alt="Planes UCM – Información y afiliación"
        class="h-14 md:h-24 w-auto"
        width="160"
        height="64"
        loading="eager"
        decoding="async"
      />
    </a>

    <a
      href={wa}
      data-cta="whatsapp"
      class="ml-3 md:hidden inline-flex items-center px-3 py-2 rounded-lg bg-emerald-600 text-white font-semibold text-sm shadow hover:bg-emerald-700"
      aria-label="WhatsApp directo para cotizar"
      rel="noopener nofollow"
    >
      Contactar
    </a>

    <nav
      class="hidden md:flex ml-auto items-center gap-6 text-sm font-medium text-slate-600"
      aria-label="Navegación principal"
    >
      <a href="#planes" class="hover:text-slate-900">Planes</a>
      <a href="#cobertura" class="hover:text-slate-900">Cobertura</a>
      <a href="#contacto" class="hover:text-slate-900">Contacto</a>

      <a
        href={tel}
        data-cta="llamar"
        class="text-slate-900 hover:underline whitespace-nowrap"
        aria-label="Llamar a la ejecutiva"
        rel="nofollow"
      >
        Contactar ejecutiva: +56 {SITE.phone}
      </a>
    </nav>

    <a
      href={wa}
      target="_blank"
      data-cta="whatsapp"
      class="hidden md:inline-flex ml-6 rounded-xl px-5 py-2 bg-emerald-600 text-white font-semibold text-sm shadow hover:bg-emerald-700"
      aria-label="Cotizar plan UCM por WhatsApp"
      rel="noopener nofollow"
    >
      Cotizar por WhatsApp
    </a>

    <button
      type="button"
      class="md:hidden ml-3 inline-flex items-center justify-center p-2 rounded-md border border-slate-300 text-slate-700"
      aria-label="Abrir menú"
      aria-controls="mobile-menu"
      aria-expanded="false"
      id="menuBtn"
    >
      ☰
    </button>
  </div>

  <div id="mobile-menu" class="md:hidden hidden border-t border-slate-200 bg-white">
    <nav
      class="max-w-6xl mx-auto px-4 py-3 flex flex-col gap-3 text-sm"
      aria-label="Navegación móvil"
    >
      <a href="#planes" class="py-2">Planes</a>
      <a href="#cobertura" class="py-2">Cobertura</a>
      <a href="#contacto" class="py-2">Contacto</a>

      <a
        href={wa}
        data-cta="whatsapp"
        class="rounded-lg px-4 py-3 bg-emerald-600 text-white font-semibold text-center"
        rel="noopener nofollow"
      >
        Cotizar por WhatsApp
      </a>

      <a
        href={tel}
        data-cta="llamar"
        class="rounded-lg px-4 py-3 bg-[#204D8D] text-white font-semibold text-center"
        rel="nofollow"
      >
        Contactar ejecutiva
      </a>
    </nav>
  </div>
</header>

<div id="contenido" class="sr-only" aria-hidden="true"></div>

<script>
  ;(function () {
    const btn = document.getElementById('menuBtn')
    const menu = document.getElementById('mobile-menu')
    if (!btn || !menu) return

    function toggle(open) {
      const isOpen = open ?? menu.classList.contains('hidden')
      menu.classList.toggle('hidden', !isOpen)
      btn.setAttribute('aria-expanded', String(isOpen))
      btn.setAttribute('aria-label', isOpen ? 'Cerrar menú' : 'Abrir menú')
    }

    btn.addEventListener('click', () => toggle())
    menu.querySelectorAll("a[href^='#']").forEach((a) => {
      a.addEventListener('click', () => toggle(false))
    })
  })()
</script>
